from requests import get
from requests import post
import time
import json
''''''

air_tmp = {"close":"Z6VJACYCAACXBgAAUxEAAKwiAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAjEAAAAAAAEAAAAAAQAAAAAAAAAAAAAAAAAAAAABAAEAAAEAAA",
           "22coldld": "Z6VJACgCAACKBgAAUREAALAiAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAjEAAAEBAQAAAAEBAAAAAAAAAAAAAAAAAAAAAAABAAEAAAEAAA",
           "23coldld": "Z6VJACgCAACJBgAAUREAALAiAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAjEAAAEBAQAAAQEBAAAAAAAAAAAAAAAAAAAAAAABAAEAAAEAAA",
           "24coldld": "Z6VJACcCAACPBgAAUBEAAK8iAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAjEAAAEBAQAAAAAAAQAAAAAAAAAAAAAAAAAAAAABAAEAAAEAAA",
           "25coldld": "Z6VJACYCAACTBgAANhEAAMoiAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAjEAAAEBAQAAAQAAAQAAAAAAAAAAAAAAAAAAAAABAAEAAAEAAA",
           "26coldld": "Z6VJACcCAACPBgAAUhEAAK0iAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAjEAAAEBAQAAAAEAAQAAAAAAAAAAAAAAAAAAAAABAAEAAAEAAA",
           "27coldld": "Z6VJACYCAACSBgAAUREAAK0iAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAjEAAAEBAQAAAQEAAQAAAAAAAAAAAAAAAAAAAAABAAEAAAEAAA",
           "28coldld": "Z6VJACcCAACQBgAAUREAAK4iAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAjEAAAEBAQAAAAABAQAAAAAAAAAAAAAAAAAAAAABAAEAAAEAAA",
           "22hotld": "Z6VJACcCAACSBgAAUhEAAK4iAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAjAAAQEBAQAAAAEBAAAAAAAAAAAAAAAAAAAAAAABAAEAAAEAAA",
           "23hotld": "Z6VJACcCAACSBgAAUREAAK8iAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAjAAAQEBAQAAAAABAQAAAAAAAAAAAAAAAAAAAAABAAEAAAEAAA",
           "24hotld": "Z6VJACcCAACSBgAAUBEAAK8iAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAjAAAQEBAQAAAAAAAQAAAAAAAAAAAAAAAAAAAAABAAEAAAEAAA",
           "25hotld": "Z6VJACcCAACRBgAAUREAAK4iAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAjAAAQEBAQAAAQAAAQAAAAAAAAAAAAAAAAAAAAABAAEAAAEAAA",
           "26hotld": "Z6VJACcCAACSBgAAUREAAK8iAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAjAAAQEBAQAAAAEAAQAAAAAAAAAAAAAAAAAAAAABAAEAAAEAAA",
           "27hotld": "Z6VJACYCAACSBgAAUREAAK4iAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAjAAAQEBAQAAAQEAAQAAAAAAAAAAAAAAAAAAAAABAAEAAAEAAA",
           "28hotld": "Z6VJACcCAACSBgAAUREAAK8iAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAjAAAQEBAQAAAAABAQAAAAAAAAAAAAAAAAAAAAABAAEAAAEAAA",
           }


'''
url = 'http://192.168.3.5:8123/api/states/sensor.temperature_158d0002e26e39'
headers = {
    'Authorization': 'Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJmNmJkNmEyOWM4ZjY0ZjI1OWY4ZDBlOWI4YWU2MTNiZSIsImlhdCI6MTU0ODIyMzg2MiwiZXhwIjoxODYzNTgzODYyfQ.-q8mDUy48ifCGaxXU7uo6xXy-4O1pQTpurRNgJ3aPJk',
    'content-type': 'application/json',
}

response = get(url, headers=headers)
data = str = unicode.encode(response.text)
# print data
data = json.loads(data)

print data["state"]
time.sleep(1)
'''



url = 'http://192.168.3.5:8123/api/services/image_processing/scan'      #http://localhost:8123/api/services/switch/turn_on
headers = {
    'Authorization': 'Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJmNmJkNmEyOWM4ZjY0ZjI1OWY4ZDBlOWI4YWU2MTNiZSIsImlhdCI6MTU0ODIyMzg2MiwiZXhwIjoxODYzNTgzODYyfQ.-q8mDUy48ifCGaxXU7uo6xXy-4O1pQTpurRNgJ3aPJk',
    'content-type': 'application/json',
}
# data = '{"entity_id": "remote.xiaomi_rm","command":"' + air_tmp["close"] + '"}'
data = '{"entity_id": "image_processing.ms_face_feature"}'
response = post(url,data=data, headers=headers)
print(response.text)

url = 'http://192.168.3.5:8123/api/states/image_processing.ms_face_feature'
headers = {
    'Authorization': 'Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJmNmJkNmEyOWM4ZjY0ZjI1OWY4ZDBlOWI4YWU2MTNiZSIsImlhdCI6MTU0ODIyMzg2MiwiZXhwIjoxODYzNTgzODYyfQ.-q8mDUy48ifCGaxXU7uo6xXy-4O1pQTpurRNgJ3aPJk',
    'content-type': 'application/json',
}
response = get(url, headers=headers)
data = unicode.encode(response.text)
data = json.loads(data)
data1 = unicode.encode(data["state"])
print type(data1),data["attributes"]["faces"]

# if int(data["state"]) >= 1:
#     data1 = (data["attributes"])
#     print data1["faces"][0]["gender"], data1["faces"][0]["age"], data1["faces"][0]["glasses"]
#     print type(data1["faces"][0]["gender"]),data1["faces"][0]
#     # print type(data),data


